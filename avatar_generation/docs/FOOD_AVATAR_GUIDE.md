# ç¾é£Ÿèµ›é“ç¤¾åª’å¤´åƒç”ŸæˆæŒ‡å—

## æ–¹æ¡ˆè¯´æ˜

è¿™ä¸ªæ–¹æ¡ˆé€šè¿‡**ç³»ç»Ÿæ€§åœ°å˜åŒ–æç¤ºè¯çš„å¤šä¸ªç»´åº¦**æ¥ç”Ÿæˆå¤§æ‰¹é‡é«˜åº¦å¤šæ ·åŒ–çš„ç¾é£Ÿä¸»é¢˜ç¤¾åª’å¤´åƒï¼Œæ”¯æŒ10000+å¼ ä¸é‡å¤å›¾åƒã€‚

### å†…å®¹ç±»å‹ï¼ˆ3ç§ï¼‰

1. **çº¯ç¾é£Ÿç‰¹å†™** (40%)ï¼šé£Ÿç‰©ä¸ºä¸»è§’çš„ä¸“ä¸šç¾é£Ÿæ‘„å½±é£æ ¼
2. **äººåƒç¾é£Ÿåœºæ™¯** (35%)ï¼šçœŸå®ç”Ÿæ´»ä¸­çš„ç”¨é¤åœºæ™¯
3. **ç¾é£Ÿåšä¸»/å¨å¸ˆå±•ç¤º** (25%)ï¼šç¾é£Ÿåˆ›ä½œè€…å±•ç¤ºä½œå“

### ç¾é£Ÿåˆ†ç±»ï¼ˆ100+ç§å…·ä½“é£Ÿç‰©ï¼‰

**æ±‰å ¡ç±»** (15ç§)ï¼šç»å…¸èŠå£«å ¡ã€åŒå±‚åŸ¹æ ¹å ¡ã€è˜‘è‡ç‘å£«å ¡ç­‰
**æŠ«è¨ç±»** (12ç§)ï¼šæ„å¼è¾£é¦™è‚ ã€è‡³å°ŠæŠ«è¨ã€ç›æ ¼ä¸½ç‰¹ç­‰
**å¿«é¤ç±»** (10ç§)ï¼šè–¯æ¡ã€ç‚¸é¸¡ç¿…ã€èŠå£«ç‰ç±³ç‰‡ã€çƒ­ç‹—ç­‰
**äºšæ´²é¤** (15ç§)ï¼šæ‹‰é¢ã€å¯¿å¸ã€ç‚’é¢ã€æ©™çš®é¸¡ã€éŸ©å¼ç‚¸é¸¡ç­‰
**å¢¨è¥¿å“¥é¤** (8ç§)ï¼šå·é¥¼ç¢—ã€å¡”å¯ã€ç‰ç±³ç‰‡ã€å¢¨è¥¿å“¥å·ç­‰
**ç”œç‚¹ç±»** (18ç§)ï¼šå·§å…‹åŠ›è›‹ç³•ã€ç…é¥¼ã€èŠå£«è›‹ç³•ã€ç”œç”œåœˆç­‰
**é¥®å“ç±»** (15ç§)ï¼šæ‹¿é“ã€å¥¶æ˜”ã€çç å¥¶èŒ¶ã€å†°å’–å•¡ç­‰
**æ—©é¤ç±»** (10ç§)ï¼šç­å°¼è¿ªå…‹è›‹ã€ç‰›æ²¹æœåå¸ã€æ³•å¼åå¸ç­‰
**ç²¾è‡´é¤** (10ç§)ï¼šç‰›æ’ã€ä¸‰æ–‡é±¼ã€é¾™è™¾ã€æ‰‡è´ç­‰

### å¤šæ ·æ€§ç»´åº¦

**çº¯ç¾é£Ÿåœºæ™¯ç»´åº¦**ï¼š
1. æ‹æ‘„è§’åº¦ï¼ˆ6ç§ï¼‰ï¼šä¿¯æ‹ã€45åº¦ã€ç‰¹å†™ã€ä¾§è§†ç­‰
2. é£Ÿç‰©é€ å‹ï¼ˆ7ç§ï¼‰ï¼šç²¾ç¾æ‘†ç›˜ã€è´¨æœ´å‘ˆç°ã€Instagramé£æ ¼ç­‰
3. é¤å…·é“å…·ï¼ˆ10ç§ï¼‰ï¼šç™½ç“·ç›˜ã€æœ¨ç §æ¿ã€å¤–å–ç›’ç­‰
4. èƒŒæ™¯ï¼ˆ8ç§ï¼‰ï¼šè™šåŒ–èƒŒæ™¯ã€æœ¨è´¨æ¡Œé¢ã€å¤§ç†çŸ³å°é¢ç­‰
5. å…‰ç…§ï¼ˆ8ç§ï¼‰ï¼šè‡ªç„¶çª—å…‰ã€æŸ”å’Œå®¤å†…å…‰ã€é¤å…å…‰ç­‰

**äººç‰©åœºæ™¯ç»´åº¦**ï¼š
6. æ—è£”ï¼ˆ5ç§ï¼‰ï¼šåæ˜ ç¾å›½äººå£åˆ†å¸ƒ
7. å¹´é¾„ï¼ˆ9ç§ï¼‰ï¼š18-38å²
8. æ€§åˆ«ï¼ˆ2ç§ï¼‰ï¼šç”·å¥³å„50%
9. å‘å‹ï¼ˆ6ç§ï¼‰
10. æœè£…ï¼ˆ10ç§ï¼‰ï¼šä¼‘é—²Tæ¤ã€å«è¡£ã€å¨å¸ˆæœç­‰
11. åŠ¨ä½œï¼ˆ10ç§åƒ+8ç§å±•ç¤ºï¼‰ï¼šå’¬ã€äº«ç”¨ã€å±•ç¤ºã€ç«¯ä¸Šç­‰
12. è¡¨æƒ…ï¼ˆ9ç§ï¼‰ï¼šå¼€å¿ƒã€æ»¡è¶³ã€æƒŠå–œç­‰
13. åœºæ™¯ï¼ˆ12ç§ï¼‰ï¼šå®¶é‡Œå¨æˆ¿ã€é¤å…ã€å’–å•¡å…ã€æˆ·å¤–ç­‰
14. æ‹æ‘„è§’åº¦ï¼ˆ6ç§ï¼‰

**ç†è®ºç»„åˆæ•°**ï¼š**è¶…è¿‡10äº¿ç§** â†’ è½»æ¾æ”¯æŒ10000+å¼ ä¸é‡å¤å›¾åƒï¼

## å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1ï¼šç›´æ¥è¿è¡Œï¼ˆæ¨èï¼‰

```bash
# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
pip install -e .
pip install tqdm

# è¿è¡Œç¾é£Ÿå¤´åƒç”Ÿæˆï¼ˆé»˜è®¤10000å¼ ï¼‰
python generate_food_avatars.py
```

ç”Ÿæˆçš„å›¾åƒä¼šä¿å­˜åœ¨ `food_avatars_output/` ç›®å½•ï¼Œå‘½åä¸º `food_avatar_00000.png` åˆ° `food_avatar_09999.png`ã€‚

### æ–¹æ³•2ï¼šæµ‹è¯•æç¤ºè¯ç”Ÿæˆå™¨

```bash
# æŸ¥çœ‹20ä¸ªç¤ºä¾‹æç¤ºè¯
python food_prompt_generator.py
```

è¿™ä¼šæ˜¾ç¤ºç”Ÿæˆå™¨äº§ç”Ÿçš„å„ç§æç¤ºè¯ï¼Œå¸®åŠ©ä½ ç†è§£å¤šæ ·æ€§æ•ˆæœã€‚

## æ€§èƒ½é¢„ä¼°

æ ¹æ®GPUé…ç½®ï¼Œé¢„ä¼°æ—¶é—´å¦‚ä¸‹ï¼š

| GPUå‹å· | å•å¼ è€—æ—¶ | 10000å¼ æ€»è€—æ—¶ | ä¼˜åŒ–å»ºè®® |
|---------|---------|--------------|----------|
| H100/H800 | ~0.8ç§’ | ~2.2å°æ—¶ | å¼€å¯compileï¼Œä½¿ç”¨_flash_3 |
| A100 | ~1.5ç§’ | ~4.2å°æ—¶ | ä½¿ç”¨flash backend |
| RTX 4090 | ~2.0ç§’ | ~5.6å°æ—¶ | é»˜è®¤é…ç½®å³å¯ |
| RTX 3090 | ~3.0ç§’ | ~8.3å°æ—¶ | é»˜è®¤é…ç½®å³å¯ |

## é«˜çº§é…ç½®

### 1. ä¿®æ”¹ç”Ÿæˆæ•°é‡

ç¼–è¾‘ `generate_food_avatars.py`ï¼š

```python
NUM_IMAGES = 10000  # æ”¹ä¸ºä½ éœ€è¦çš„æ•°é‡ï¼Œå¦‚ 5000 æˆ– 20000
```

### 2. æ€§èƒ½ä¼˜åŒ–ï¼ˆH100/H800 GPUï¼‰

ç¼–è¾‘ `generate_food_avatars.py`ï¼š

```python
compile = True  # å¼€å¯ç¼–è¯‘ï¼ˆé¦–æ¬¡æ…¢ï¼Œåç»­å¿«ï¼‰
```

ç„¶åè¿è¡Œï¼š
```bash
ZIMAGE_ATTENTION=_flash_3 python generate_food_avatars.py
```

### 3. åˆ†æ‰¹ç”Ÿæˆï¼ˆé¿å…é•¿æ—¶é—´è¿è¡Œï¼‰

å¦‚æœæ‹…å¿ƒä¸­é€”ä¸­æ–­ï¼Œå¯ä»¥ä¿®æ”¹è„šæœ¬åˆ†æ‰¹è¿è¡Œï¼š

```python
# ç¬¬ä¸€æ‰¹ï¼šç”Ÿæˆ 0-2999
for i in range(0, 3000):
    # ç”Ÿæˆé€»è¾‘...
    output_path = output_dir / f"food_avatar_{i:05d}.png"

# ç¬¬äºŒæ‰¹ï¼šç”Ÿæˆ 3000-5999
for i in range(3000, 6000):
    # ç”Ÿæˆé€»è¾‘...
    output_path = output_dir / f"food_avatar_{i:05d}.png"

# ç¬¬ä¸‰æ‰¹ï¼šç”Ÿæˆ 6000-9999
for i in range(6000, 10000):
    # ç”Ÿæˆé€»è¾‘...
    output_path = output_dir / f"food_avatar_{i:05d}.png"
```

### 4. è‡ªå®šä¹‰ç¾é£Ÿç±»å‹

å¦‚æœæƒ³æ·»åŠ æ›´å¤šç¾é£Ÿï¼Œç¼–è¾‘ `food_prompt_generator.py`ï¼š

```python
# æ·»åŠ æ–°çš„ç¾é£Ÿç±»åˆ«
self.italian_food = [
    "creamy fettuccine alfredo with parmesan",
    "lasagna with layers of cheese and meat sauce",
    "risotto with mushrooms and truffle oil",
    # ... æ·»åŠ æ›´å¤š
]

# åœ¨ all_foods ä¸­åŒ…å«æ–°ç±»åˆ«
self.all_foods = (
    self.burgers + self.pizzas + self.fast_food +
    self.asian_food + self.mexican_food + self.desserts +
    self.beverages + self.breakfast + self.fine_dining +
    self.italian_food  # æ–°å¢
)
```

## ç”Ÿæˆæ•ˆæœç¤ºä¾‹

### çº¯ç¾é£Ÿç‰¹å†™ç¤ºä¾‹
```
overhead flat lay shot, of delicious juicy classic cheeseburger with
melted cheddar and sesame bun, beautifully plated, on white ceramic
plate, wooden table background, natural window light, food photography,
Shot on iPhone, natural indoor lighting, high quality, 8k
```

### äººåƒç¾é£Ÿç¤ºä¾‹
```
straight on shot, Caucasian American woman age 25, with long hair,
wearing casual t-shirt, happy smile, taking a big bite of hot
pepperoni pizza with melted mozzarella, at home kitchen table,
casual home setting natural daylight from window, Shot on iPhone,
bright daylight, high quality, 8k
```

### ç¾é£Ÿåšä¸»å±•ç¤ºç¤ºä¾‹
```
three-quarter view, Asian American man age 28, with short hair,
wearing apron over casual clothes, excited expression, holding up
plate of steaming bowl of ramen with soft boiled egg, in home kitchen
cooking, kitchen counter cooking equipment visible, casual gaming photo,
natural indoor lighting, high quality, 8k
```

## æŸ¥çœ‹ç”Ÿæˆè¿›åº¦

è„šæœ¬ä¼šæ˜¾ç¤ºå®æ—¶è¿›åº¦ï¼š

```
ç”Ÿæˆç¾é£Ÿå¤´åƒ: 15%|â–ˆâ–ˆâ–ˆâ–Œ              | 1500/10000 [50:00<283:20, 2.00s/it]

[1500/10000] æˆåŠŸ: 1500, å¤±è´¥: 0
  å¹³å‡é€Ÿåº¦: 2.00ç§’/å¼ 
  é¢„è®¡å‰©ä½™æ—¶é—´: 283.3 åˆ†é’Ÿ
```

æ¯100å¼ ä¼šæ‰“å°ä¸€æ¬¡è¿›åº¦æ›´æ–°ã€‚

## è¾“å‡ºç»“æœ

ç”Ÿæˆå®Œæˆåï¼š

```
food_avatars_output/
â”œâ”€â”€ food_avatar_00000.png
â”œâ”€â”€ food_avatar_00001.png
â”œâ”€â”€ food_avatar_00002.png
...
â””â”€â”€ food_avatar_09999.png
```

æ¯å¼ å›¾éƒ½ä¼šæœ‰ä¸åŒçš„ï¼š
- ç¾é£Ÿç±»å‹å’Œå‘ˆç°æ–¹å¼
- åœºæ™¯å’ŒèƒŒæ™¯
- äººç‰©ç‰¹å¾ï¼ˆå¦‚åŒ…å«äººç‰©ï¼‰
- æ‹æ‘„è§’åº¦å’Œå…‰ç…§
- æ•´ä½“é£æ ¼

## å†…å®¹åˆ†å¸ƒ

åœ¨10000å¼ å›¾åƒä¸­ï¼Œå¤§è‡´åˆ†å¸ƒå¦‚ä¸‹ï¼š

- **çº¯ç¾é£Ÿç‰¹å†™**ï¼š~4000å¼ ï¼ˆå„ç±»ç¾é£Ÿçš„ä¸“ä¸šæ‘„å½±ï¼‰
- **äººåƒç¾é£Ÿåœºæ™¯**ï¼š~3500å¼ ï¼ˆçœŸå®ç”¨é¤åœºæ™¯ï¼‰
- **ç¾é£Ÿåšä¸»å±•ç¤º**ï¼š~2500å¼ ï¼ˆåˆ›ä½œè€…å±•ç¤ºç¾é£Ÿï¼‰

ç¾é£Ÿç±»å‹ä¹Ÿä¼šç›¸å¯¹å‡è¡¡åˆ†å¸ƒï¼Œç¡®ä¿å¤šæ ·æ€§ã€‚

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•ç¡®ä¿ç”Ÿæˆçš„å›¾åƒç¬¦åˆç¾å›½å®¡ç¾ï¼Ÿ

A: æç¤ºè¯å·²ç»è®¾è®¡ä¸ºç¾å›½é£æ ¼ï¼š
- ç¾é£Ÿéƒ½æ˜¯ç¾å¼å¸¸è§é£Ÿç‰©ï¼ˆæ±‰å ¡ã€æŠ«è¨ã€ç‚¸é¸¡ç­‰ï¼‰
- äººç‰©æ—è£”åæ˜ ç¾å›½äººå£åˆ†å¸ƒ
- åœºæ™¯éƒ½æ˜¯ç¾å›½æ—¥å¸¸ç¯å¢ƒ
- ä½¿ç”¨"Shot on iPhone"ç¡®ä¿çœŸå®ç”Ÿæ´»æ„Ÿ

### Q: ç”Ÿæˆçš„å›¾åƒè´¨é‡å¦‚ä½•ï¼Ÿ

A: ä½¿ç”¨Z-Image-Turboæ¨¡å‹ï¼š
- 1024x1024é«˜åˆ†è¾¨ç‡
- çœŸå®ç”Ÿæ´»æ„Ÿï¼ˆéè¿‡åº¦PSé£æ ¼ï¼‰
- é€‚åˆç¤¾åª’å¤´åƒä½¿ç”¨
- æ¯å¼ å›¾ç‹¬ä¸€æ— äºŒ

### Q: æ˜¾å­˜ä¸è¶³æ€ä¹ˆåŠï¼Ÿ

A: å°è¯•ï¼š
1. é™ä½åˆ†è¾¨ç‡åˆ° 768x768ï¼ˆä¿®æ”¹ height/widthï¼‰
2. ä½¿ç”¨ float16 è€Œé bfloat16
3. ç¡®ä¿æ²¡æœ‰å…¶ä»–ç¨‹åºå ç”¨GPU

### Q: å¦‚ä½•åŠ å¿«ç”Ÿæˆé€Ÿåº¦ï¼Ÿ

A:
1. ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„attention backend
2. H100/H800 GPUå¼€å¯compile
3. å…³é—­å…¶ä»–å ç”¨GPUçš„ç¨‹åº
4. ä½¿ç”¨å¤šGPUå¹¶è¡Œï¼ˆè§ä¸‹æ–‡ï¼‰

## å¤šGPUå¹¶è¡Œç”Ÿæˆ

å¦‚æœæœ‰å¤šå¼ GPUï¼Œå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªå®ä¾‹ï¼š

```bash
# GPU 0: ç”Ÿæˆ 0-3333
CUDA_VISIBLE_DEVICES=0 python generate_food_avatars.py &  # ä¿®æ”¹rangeä¸º0-3334

# GPU 1: ç”Ÿæˆ 3334-6666
CUDA_VISIBLE_DEVICES=1 python generate_food_avatars.py &  # ä¿®æ”¹rangeä¸º3334-6667

# GPU 2: ç”Ÿæˆ 6667-9999
CUDA_VISIBLE_DEVICES=2 python generate_food_avatars.py &  # ä¿®æ”¹rangeä¸º6667-10000

wait
```

## è´¨é‡æ£€æŸ¥å»ºè®®

ç”Ÿæˆå®Œæˆåï¼š

1. **éšæœºæŠ½æŸ¥**ï¼šæ£€æŸ¥100-200å¼ ï¼Œç¡®ä¿è´¨é‡å’Œå¤šæ ·æ€§
2. **åˆ†ç±»æŸ¥çœ‹**ï¼šæŒ‰æ–‡ä»¶åé¡ºåºæµè§ˆï¼Œè§‚å¯Ÿå¤šæ ·æ€§å˜åŒ–
3. **åˆ é™¤ä¸ä½³å›¾åƒ**ï¼šæå°‘æ•°å¯èƒ½æœ‰ç‘•ç–µï¼Œæ‰‹åŠ¨åˆ é™¤å³å¯
4. **åæœŸç­›é€‰**ï¼šå¦‚æœ‰ç‰¹å®šéœ€æ±‚ï¼Œå¯ç”¨è„šæœ¬æ‰¹é‡ç­›é€‰

## é¢„è®¡èµ„æºæ¶ˆè€—

- **ç£ç›˜ç©ºé—´**ï¼šæ¯å¼ å›¾çº¦2-4MBï¼Œ10000å¼ çº¦20-40GB
- **æ˜¾å­˜**ï¼š16GBï¼ˆæ¨èï¼‰æˆ– 8GBï¼ˆéœ€ä¼˜åŒ–ï¼‰
- **ç”Ÿæˆæ—¶é—´**ï¼š2-8å°æ—¶ï¼ˆå–å†³äºGPUï¼‰

## ä»£ç æ¶æ„

```
food_prompt_generator.py          # æç¤ºè¯ç”Ÿæˆå™¨ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
  â””â”€â”€ FoodPromptGenerator ç±»
      â”œâ”€â”€ ç¾é£Ÿåˆ†ç±»å®šä¹‰
      â”œâ”€â”€ äººç‰©ç‰¹å¾å®šä¹‰
      â”œâ”€â”€ åœºæ™¯å’Œé“å…·å®šä¹‰
      â”œâ”€â”€ æƒé‡åˆ†å¸ƒç³»ç»Ÿ
      â””â”€â”€ generate_prompt() æ–¹æ³•

generate_food_avatars.py          # æ‰¹é‡ç”Ÿæˆè„šæœ¬
  â”œâ”€â”€ åŠ è½½æ¨¡å‹
  â”œâ”€â”€ åˆå§‹åŒ–ç”Ÿæˆå™¨
  â”œâ”€â”€ å¾ªç¯ç”Ÿæˆå›¾åƒ
  â””â”€â”€ ä¿å­˜ç»“æœ
```

## æ€»ç»“

è¿™ä¸ªç¾é£Ÿèµ›é“æ–¹æ¡ˆçš„ä¼˜åŠ¿ï¼š

âœ“ **æé«˜å¤šæ ·æ€§**ï¼š18ä¸ªç»´åº¦ç»„åˆï¼Œ10äº¿+ç§å¯èƒ½
âœ“ **çœŸå®ç¾å›½é£æ ¼**ï¼šç¾é£Ÿã€äººç‰©ã€åœºæ™¯éƒ½ç¬¦åˆç¾å›½å®¡ç¾
âœ“ **å¯é‡ç°**ï¼šä½¿ç”¨å›ºå®šéšæœºç§å­ï¼Œå¯é‡æ–°ç”Ÿæˆç‰¹å®šå›¾åƒ
âœ“ **é«˜æ•ˆ**ï¼šåˆ©ç”¨GPUåŠ é€Ÿï¼Œæ‰¹é‡ç”Ÿæˆ
âœ“ **å¯å®šåˆ¶**ï¼šæ‰€æœ‰å‚æ•°éƒ½å¯ä»¥è½»æ¾ä¿®æ”¹
âœ“ **ä¸“ä¸šè´¨é‡**ï¼šä½¿ç”¨Z-Image-Turboæ¨¡å‹ï¼Œé€‚åˆç¤¾åª’ä½¿ç”¨

å¼€å§‹ç”Ÿæˆä½ çš„ç¾é£Ÿå¤´åƒåº“å§ï¼ğŸ”ğŸ•ğŸ°
